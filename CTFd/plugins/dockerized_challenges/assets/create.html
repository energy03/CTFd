{% extends "admin/challenges/create.html" %}

{% block header %}
<div class="alert alert-secondary" role="alert">
	Dockerized Challenges run in a Docker container.
	<br>
	They can be standard or dynamic challenges.
	<br>
</div>
{% endblock %}


{% block value %}



<div class="form-check">
    <input type="checkbox" class="form-check-input" id="dockerize-challenge-dynamic-check-input" name="is_dynamic" >
    <label class="form-check-label" for="dockerize-challenge-dynamic-check-input">Dynamic Challenge ?<br>
		<small>
			<span>Is it a standard or a dynamic challenge ?</span>
			<ul>
				<li>Standard: The challenge has an unchanging value</li>
				<li>Dynamic: The challenge value decreases as it gets resolved</li>
			</ul>
		</small>
	</label>
</div>

<div class="dockerize-hiddable-standard">
	<div class="form-group">
		<label for="value">Value<br>
			<small class="form-text text-muted">
				This is how many points the challenge is worth right now.
			</small>
		</label>
		<input type="number" class="form-control dockerize-hiddable-standard-required-field" name="value" placeholder="Enter value" >
	</div>
</div>

<div class="dockerize-hiddable-dynamic" hidden>
	<div class="form-group">
		<label for="value">Initial Value<br>
			<small class="form-text text-muted">
				This is how many points the challenge is worth initially.
			</small>
		</label>
		<input type="number" class="form-control dockerize-hiddable-dynamic-required-field" name="initial" placeholder="Enter value" >
	</div>

	<div class="form-group" >
		<label for="value">Decay Function<br>
			<small class="form-text text-muted">
				<span>How the dynamic value will be calculated based on the Decay value</span>
				<ul>
					<li>Linear: Calculated as <code>Initial - (Decay * SolveCount)</code></li>
					<li>Logarithmic: Calculated as <code>(((Minimum - Initial) / (Decay^2)) * (SolveCount^2)) + Initial</code></li>
				</ul>
			</small>
		</label>
		<select name="function" class="custom-select" >
			<option value="linear">Linear</option>
			<option value="logarithmic">Logarithmic</option>
		</select>
	</div>
	
	<div class="form-group">
		<label for="value">Decay<br>
			<small class="form-text text-muted">
				<span>The decay value is used differently depending on the above Decay Function</span>
				<ul>
					<li>Linear: The amount of points deducted per solve. Equal deduction per solve.</li>
					<li>Logarithmic: The amount of solves before the challenge reaches its minimum value. Earlier solves will lose less
						points. Later solves will lose more points</li>
				</ul>
			</small>
		</label>
		<input type="number" class="form-control dockerize-hiddable-dynamic-required-field" name="decay" min="1" placeholder="Enter Decay value" >
	</div>
	
	<div class="form-group">
		<label for="value">Minimum Value<br>
			<small class="form-text text-muted">
				This is the lowest that the challenge can be worth
			</small>
		</label>
		<input type="number" class="form-control dockerize-hiddable-dynamic-required-field" name="minimum" placeholder="Enter minimum value" >
	</div>
</div>
 
{# TODO Remove Image and Container form fields because the're no more needed #}
<div>
	<div class="form-group">
		<label for="value">Image<br>
			<small class="form-text text-muted">
				The ID of the image used to start the container for the challenge.
			</small>
		</label>
		<input type="text" name="image" class="form-control" placeholder="Enter Image ID" >
	</div>
	<div class="form-group">
		<label for="value">Container<br>
			<small class="form-text text-muted">
				The ID of the container to start.
			</small>
		</label>
		<input type="text" name="container" class="form-control" placeholder="Enter Container ID" >
	</div>
	<div class="form-group">
		<label for="value">Bind Port<br>
			<small class="form-text text-muted">
				The remote localhost port to bind the container to.
			</small>
		</label>
		<input type="number" name="port" class="form-control" placeholder="Enter Bind Port" >
	</div>
</div>
{% endblock %}

{% block type %}
<input type="hidden" value="dockerized" name="type" id="chaltype">
{% endblock %}